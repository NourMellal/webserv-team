server {
    listen 8080;                 # Port and Host
    server_name example.com;      # Optional: Server Name

    error_page 404 /errors/404.html;  # Default error pages
    client_max_body_size 10M;         # Limit client body size

    location / {
        root /var/www/html;      # Default root directory
        index index.html;        # Default file if directory is requested
        allowed_methods GET POST;  # Allowed HTTP methods
        autoindex off;           # Disable directory listing
    }

    location /redirect {
        redirect 301 https://newsite.com;  # HTTP Redirection
    }

    location /static {
        root /var/www/static;
        autoindex on;  # Enable directory listing
    }

    location /cgi-bin {
        cgi on;
        cgi_pass /usr/bin/php-cgi;          # Execute CGI based on file extension
        cgi_working_directory /var/www/cgi; # Run CGI in the correct directory
    }

    location /upload {
        allowed_methods POST;                 # Allow file uploads
        upload_store /var/www/uploads;      # Where uploaded files are stored
    }
}
